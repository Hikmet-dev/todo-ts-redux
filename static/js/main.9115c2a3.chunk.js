(this["webpackJsonptodo-ts-redux"]=this["webpackJsonptodo-ts-redux"]||[]).push([[0],{271:function(e,t,n){},399:function(e,t){},401:function(e,t){},416:function(e,t){},418:function(e,t){},446:function(e,t){},448:function(e,t){},449:function(e,t){},454:function(e,t){},456:function(e,t){},462:function(e,t){},464:function(e,t){},483:function(e,t){},495:function(e,t){},498:function(e,t){},515:function(e,t,n){"use strict";n.r(t);var r,a,c=n(0),i=n.n(c),o=n(14),s=n.n(o),u=(n(271),n(10)),l=n(22),d=n(564),j=n(557),b=n(555),f=n(565),m=n(571),O=n(7),h=n(25),p=n.n(h),g=n(36),x=n(21),v=n(248),k=n.n(v).a.create({baseURL:"https://data-multi-user.herokuapp.com/"}),y=Object(x.b)("task/fetchToken",function(){var e=Object(g.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.get("tasks",{params:{order:t.order,filterBy:t.filterBy,page:t.activePage,taskCount:t.itemPerPage}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),S=Object(x.b)("task/createTask",function(){var e=Object(g.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("task",{name:t,done:!1});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=Object(x.b)("task/changeTaskName",function(){var e=Object(g.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.patch("task/".concat(t.id),{name:t.name});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=Object(x.b)("task/changeDoneStatus",function(){var e=Object(g.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.patch("task/".concat(t.id),{done:t.done});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),N=Object(x.b)("task/deketetask",function(){var e=Object(g.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.delete("task/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C=Object(x.c)({name:"task",initialState:{tasks:[],pageCount:1,isLoading:!1,hasError:!1,changeElement:null},reducers:{},extraReducers:(r={},Object(O.a)(r,y.pending,(function(e){e.isLoading=!1,e.hasError=!1})),Object(O.a)(r,y.fulfilled,(function(e,t){e.tasks=t.payload.tasks,e.pageCount=t.payload.pageCount,e.isLoading=!0,e.hasError=!1})),Object(O.a)(r,y.rejected,(function(e){e.isLoading=!1,e.hasError=!0})),Object(O.a)(r,S.pending,(function(e){e.isLoading=!0})),Object(O.a)(r,S.fulfilled,(function(e){e.changeElement=!e.changeElement})),Object(O.a)(r,S.rejected,(function(e){e.hasError=!0})),Object(O.a)(r,w.pending,(function(e){})),Object(O.a)(r,w.fulfilled,(function(e){e.changeElement=!e.changeElement})),Object(O.a)(r,w.rejected,(function(e){e.hasError=!0})),Object(O.a)(r,E.pending,(function(e){e.isLoading=!0})),Object(O.a)(r,E.fulfilled,(function(e){e.changeElement=!e.changeElement})),Object(O.a)(r,E.rejected,(function(e){e.hasError=!0})),Object(O.a)(r,N.pending,(function(e){e.isLoading=!0})),Object(O.a)(r,N.fulfilled,(function(e){e.changeElement=!e.changeElement})),Object(O.a)(r,N.rejected,(function(e){e.hasError=!0})),r)}),P=function(e){return e.task.tasks},L=function(e){return e.task.pageCount},I=function(e){return e.task.isLoading},B=function(e){return e.task.changeElement},F=C.reducer,T=n(2),q=function(){var e=Object(u.b)();return Object(T.jsx)(m.a,{margin:"normal",id:"outlined-basic",label:"New to do",variant:"outlined",size:"small",fullWidth:!0,type:"text",onKeyPress:function(t){return function(t){var n=t.key,r=t.target;"Enter"===n&&r.value.trim()&&(e(S(r.value)),r.value="")}(t)}})},R=n(556),A=n(517),D=n(250),W=n.n(D),M=n(251),U=n.n(M),V=function(e){var t=e.onPageNow,n=e.activePage,r=Object(u.c)(L),a=new Array(r).fill(1).map((function(e,t){return t+1}));return Object(T.jsxs)(R.a,{color:"primary","aria-label":"contained button group",children:[Object(T.jsx)(A.a,{onClick:t,value:"1",children:Object(T.jsx)(W.a,{})}),a.map((function(e){return Object(T.jsx)(A.a,{onClick:t,value:e,variant:n===e?"contained":void 0,children:e},"item-".concat(e))})),Object(T.jsxs)(A.a,{onClick:t,value:a.length,children:[Object(T.jsx)(U.a,{})," "]})]})},z=n(518),K=n(558),G=n(572),J=n(550),H=n(560),$=n(561),Q=n(559),X=n(252),Y=n.n(X),Z=function(e){var t=e.task,n=Object(u.b)(),r=Object(c.useState)(!1),a=Object(l.a)(r,2),i=a[0],o=a[1],s=Object(c.useState)(!1),d=Object(l.a)(s,2),b=d[0],f=d[1],m=function(){o(!i)},O=t.createdAt.match(/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/)[0],h=t.createdAt.match(/T(((([0-1][0-9])|(2[0-3])):?[0-5][0-9]))/g)[0].replace("T","");return Object(T.jsx)(j.a,{container:!0,children:Object(T.jsxs)(z.a,{children:[Object(T.jsx)(j.a,{item:!0,xs:1,children:Object(T.jsx)(K.a,{children:Object(T.jsx)(G.a,{color:"primary",onChange:function(e){return n(E({id:e.target.value,done:e.target.checked}))},checked:t.done,value:t.id})})}),Object(T.jsx)(j.a,{item:!0,xs:8,children:i?Object(T.jsx)(J.a,{fullWidth:!0,defaultValue:t.name,autoFocus:!0,name:t.id,onBlur:function(){return m()},onKeyDown:function(e){return"Escape"===e.key&&o(!1)},onKeyPress:function(e){return function(e){var t=e.key,r=e.target;"Enter"===t&&r.value.trim()&&n(w({id:r.name,name:r.value}))}(e)},onKeyUp:function(e){return"Enter"===e.key&&o(!1)}}):Object(T.jsx)(H.a,{primary:t.name,onClick:function(){return m()}})}),Object(T.jsx)(j.a,{item:!0,xs:2,children:Object(T.jsx)(H.a,{primary:"".concat(h," ").concat(O)})}),Object(T.jsx)(j.a,{item:!0,xs:1,children:Object(T.jsx)($.a,{children:Object(T.jsx)(Q.a,{edge:"end",disabled:b,"aria-label":"delete",onClick:function(e){n(N(e.currentTarget.value)),f(!0)},value:t.id,children:Object(T.jsx)(Y.a,{})})})})]})})},_=n(89),ee=n(569),te=n(562),ne=function(e){var t=e.onChangeItemFilter,n=e.itemPerPage;return Object(T.jsxs)(ee.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:n,onChange:t,children:[Object(T.jsx)(te.a,{value:5,children:"5"}),Object(T.jsx)(te.a,{value:10,children:"10"}),Object(T.jsx)(te.a,{value:20,children:"20"})]})},re=n(563),ae=Object(x.c)({name:"filter",initialState:{filterByButtons:["all","done","undone"],filterBy:"all",orderValue:["ASC","DESC"],order:"DESC"},reducers:{changeOrder:function(e,t){e.order=t.payload},changeFilterBy:function(e,t){e.filterBy=t.payload}}}),ce=ae.actions,ie=ce.changeOrder,oe=ce.changeFilterBy,se=function(e){return e.filter.orderValue},ue=function(e){return e.filter.filterBy},le=function(e){return e.filter.order.toUpperCase()},de=function(e){return e.filter.filterByButtons},je=ae.reducer,be=function(){var e=Object(u.c)(de),t=Object(u.c)(ue),n=Object(u.b)();return Object(T.jsx)(R.a,{color:"primary","aria-label":"outlined primary button group",children:e.map((function(e){return Object(T.jsx)(A.a,{size:"medium",variant:t===e?"contained":void 0,onClick:function(e){return n(oe(e.currentTarget.value))},value:e,children:e},e)}))})},fe=function(){var e=Object(u.c)(le),t=Object(u.c)(se),n=Object(u.b)();return Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(R.a,{variant:"text",color:"primary","aria-label":"text primary button group",children:t.map((function(t){return Object(T.jsx)(A.a,{size:"medium",variant:e===t?"contained":void 0,onClick:function(e){return n(ie(e.currentTarget.value))},value:t,children:t},t)}))})})},me=Object(re.a)((function(e){return{root:{flexGrow:1},paper:{paddingTop:e.spacing(1),paddingBottom:e.spacing(2),color:e.palette.text.secondary,justifyContent:"space-between"}}})),Oe=function(e){var t=e.onChangeItemFilter,n=e.itemPerPage,r=me();return Object(T.jsx)("div",{className:r.paper,children:Object(T.jsxs)(j.a,{container:!0,spacing:3,children:[Object(T.jsx)(j.a,{item:!0,xs:6,children:Object(T.jsx)(be,{})}),Object(T.jsxs)(j.a,{item:!0,xs:3,alignItems:"center",container:!0,children:[Object(T.jsx)(_.a,{variant:"subtitle1",children:"Sort by:"}),Object(T.jsx)(fe,{})]}),Object(T.jsxs)(j.a,{item:!0,xs:3,alignItems:"center",container:!0,children:[Object(T.jsx)(_.a,{variant:"subtitle1",children:"Page count"}),Object(T.jsx)(ne,{onChangeItemFilter:t,itemPerPage:n})]})]})})},he=function(){var e=Object(c.useState)(1),t=Object(l.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(5),i=Object(l.a)(a,2),o=i[0],s=i[1],m=Object(u.c)(le),O=Object(u.c)(ue),h=Object(u.c)(P),p=Object(u.c)(I),g=Object(u.c)(L),x=Object(u.c)(B),v=Object(u.b)();Object(c.useEffect)((function(){sessionStorage.token&&v(y({order:m,filterBy:O,activePage:n,itemPerPage:o}))}),[v,x,m,O,n,o]);return Object(T.jsx)(d.a,{maxWidth:"md",children:Object(T.jsxs)(j.a,{children:[Object(T.jsx)(j.a,{children:Object(T.jsx)(q,{})}),Object(T.jsx)(Oe,{onChangeItemFilter:function(e){s(e.target.value)},itemPerPage:o}),Object(T.jsx)(j.a,{item:!0,alignItems:"center",container:!0,xs:12,children:p&&g>1&&Object(T.jsx)(V,{onPageNow:function(e){r(Number(e.currentTarget.value))},activePage:n})}),Object(T.jsx)(b.a,{children:p?h.map((function(e){return Object(T.jsx)(Z,{task:e},e.id)})):Object(T.jsx)(f.a,{})})]})})},pe=n(55),ge=n(42),xe=n(77),ve=function(e){var t=Object.assign({},e),n=Object(pe.c)(t),r=Object(l.a)(n,2),a=r[0],c=r[1];return Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(m.a,Object(xe.a)(Object(xe.a)({fullWidth:!0,margin:"normal",error:c.touched&&c.error&&!0,helperText:c.touched&&c.error&&c.error,variant:"outlined"},a),t))})},ke=Object(x.b)("user/fetchToken",function(){var e=Object(g.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("login",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ye=Object(x.b)("user/registration",function(){var e=Object(g.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.post("signup",t);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Se={firstName:sessionStorage.firstName||"",lastName:sessionStorage.lastName||"",token:sessionStorage.token||"",isLoading:!0,hasError:!1},we=Object(x.c)({name:"user",initialState:Se,reducers:{clearUserData:function(e){e.firstName=e.lastName=e.token="",e.isLoading=e.hasError=!1}},extraReducers:(a={},Object(O.a)(a,ke.pending,(function(e){e.isLoading=!1,e.hasError=!1})),Object(O.a)(a,ke.fulfilled,(function(e,t){e.token=t.payload.token,e.firstName=t.payload.firstName,e.lastName=t.payload.lastName,sessionStorage.setItem("token",e.token),sessionStorage.setItem("firstName",e.firstName),sessionStorage.setItem("lastName",e.lastName),e.isLoading=!0,e.hasError=!1})),Object(O.a)(a,ke.rejected,(function(e,t){e.isLoading=!1,e.hasError=!0})),Object(O.a)(a,ye.pending,(function(e){e.isLoading=!1,e.hasError=!1})),Object(O.a)(a,ye.fulfilled,(function(e,t){e.token=t.payload.token,e.firstName=t.payload.firstName,e.lastName=t.payload.lastName,sessionStorage.setItem("token",e.token),sessionStorage.setItem("firstName",e.firstName),sessionStorage.setItem("lastName",e.lastName),e.isLoading=!0,e.hasError=!1})),Object(O.a)(a,ye.rejected,(function(e){e.isLoading=!1,e.hasError=!0})),a)}),Ee=we.actions.clearUserData,Ne=function(e){return e.user.firstName},Ce=function(e){return e.user.lastName},Pe=function(e){return e.user.isLoading},Le=we.reducer,Ie=Object(x.c)({name:"auth",initialState:{loginForm:!0,authStatus:!1},reducers:{toggleLoginForm:function(e){e.loginForm=!e.loginForm},toggleAuthStatus:function(e,t){e.authStatus=t.payload},logOut:function(e){sessionStorage.clear(),e.authStatus=!1}}}),Be=Ie.actions,Fe=Be.toggleLoginForm,Te=Be.toggleAuthStatus,qe=Be.logOut,Re=function(e){return e.auth.loginForm},Ae=function(e){return e.auth.authStatus},De=Ie.reducer,We=function(){var e=Object(u.b)();return Object(T.jsx)(pe.b,{initialValues:{email:"",password:""},validationSchema:ge.a({email:ge.b().email("Invalid email address").required("Required"),password:ge.b().min(8,"Must be 8 characters or more").required("Required")}),onSubmit:function(t,n){var r=n.setSubmitting;e(ke(t)),e(Te(!0)),r(!1)},children:Object(T.jsxs)(pe.a,{children:[Object(T.jsx)(ve,{name:"email",label:"Email"}),Object(T.jsx)(ve,{name:"password",label:"Password",type:"password",autoComplete:"current-password"}),Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(A.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:"Log in"})})]})})},Me=function(){var e=Object(u.b)();return Object(T.jsx)(pe.b,{initialValues:{firstName:"",lastName:"",email:"",password:""},validationSchema:ge.a({firstName:ge.b().required("Required"),lastName:ge.b().required("Required"),email:ge.b().email("Invalid email address").required("Required"),password:ge.b().min(8,"Must be 8 characters or more").required("Required")}),onSubmit:function(t,n){var r=n.setSubmitting;e(ye(t)),e(Te(!0)),r(!1)},children:Object(T.jsxs)(pe.a,{children:[Object(T.jsx)(ve,{name:"firstName",label:"First name"}),Object(T.jsx)(ve,{name:"lastName",label:"Last name"}),Object(T.jsx)(ve,{name:"email",label:"Email"}),Object(T.jsx)(ve,{name:"password",label:"Password",type:"password",autoComplete:"current-password"}),Object(T.jsx)(j.a,{item:!0,children:Object(T.jsx)(A.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:"Sign up"})})]})})},Ue=function(){var e=Object(u.c)(Re);return Object(T.jsx)(j.a,{container:!0,spacing:10,justify:"center",alignItems:"center",children:Object(T.jsx)(j.a,{item:!0,xs:5,children:e?Object(T.jsx)(We,{}):Object(T.jsx)(Me,{})})})},Ve=n(574),ze=n(570),Ke=n(568),Ge=n(566),Je=n(567),He=Object(re.a)((function(e){return{root:{justifyContent:"space-between"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),$e=function(){var e=Object(u.c)(Re),t=Object(u.c)(Ne),n=Object(u.c)(Ce),r=Object(u.c)(Ae),a=Object(u.c)(Pe),c=Object(u.b)(),i=He();return Object(T.jsx)("div",{className:i.root,children:Object(T.jsx)(Ge.a,{position:"static",children:Object(T.jsx)(Je.a,{children:Object(T.jsxs)(j.a,{container:!0,alignItems:"center",justify:"space-between",children:[Object(T.jsx)(j.a,{item:!0,xs:3,children:Object(T.jsx)(_.a,{variant:"h6",className:i.title,children:"To do list"})}),r&&a&&Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(j.a,{item:!0,xs:8,children:Object(T.jsx)(_.a,{variant:"body1",align:"right",children:"".concat(t," ").concat(n)})}),Object(T.jsx)(j.a,{item:!0,xs:1,children:Object(T.jsx)(A.a,{color:"inherit",onClick:function(){return c(qe())},children:"Log Out"})})]}),Object(T.jsx)(j.a,{item:!0,xs:1,children:!(r&&a)&&Object(T.jsx)(A.a,{color:"inherit",onClick:function(){c(Fe()),c(Ee())},children:e?"Sign up":"Login"})})]})})})})},Qe=Object(x.c)({name:"error",initialState:{errorStatus:!1,statusCode:"",errorMesage:"",errorStack:{}},reducers:{createError:function(e,t){e.statusCode=t.payload.statusCode,e.errorMesage=t.payload.message,e.errorStatus=!0,console.log("createError")},closeError:function(e,t){"clickaway"!==t.payload&&(e.errorStatus=!1,e.statusCode=e.errorMesage="",e.errorStack={})}}}),Xe=Qe.actions,Ye=Xe.createError,Ze=Xe.closeError,_e=function(e){return e.error.errorStatus},et=function(e){return e.error.statusCode},tt=function(e){return e.error.errorMesage},nt=Qe.reducer,rt=n(258);var at=function(){var e=Object(u.c)(Ae),t=Object(u.c)(Pe),n=Object(u.c)(_e),r=Object(u.c)(et),a=Object(u.c)(tt),i=Object(u.b)();return Object(c.useLayoutEffect)((function(){if(sessionStorage.getItem("token")){var e=rt.decode(sessionStorage.token.split(" ")[1]);Date.now()>e.exp&&i(Te(!0)),k.defaults.headers={Authorization:sessionStorage.getItem("token")}}})),Object(T.jsxs)(d.a,{children:[Object(T.jsx)($e,{}),e&&t&&Object(T.jsx)(he,{}),!(e&&t)&&Object(T.jsx)(Ue,{}),Object(T.jsx)(Ve.a,{open:n,autoHideDuration:6e3,onClose:function(e,t){return i(Ze(t))},children:Object(T.jsxs)(ze.a,{severity:"error",children:[Object(T.jsx)(Ke.a,{children:"Error ".concat(r)}),a]})})]})};function ct(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return new Promise((function(t){return setTimeout((function(){return t({data:e})}),500)}))}var it=Object(x.b)("counter/fetchCount",function(){var e=Object(g.a)(p.a.mark((function e(t){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),ot=Object(x.c)({name:"counter",initialState:{value:0,status:"idle"},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}},extraReducers:function(e){e.addCase(it.pending,(function(e){e.status="loading"})).addCase(it.fulfilled,(function(e,t){e.status="idle",e.value+=t.payload}))}}),st=ot.actions,ut=(st.increment,st.decrement,st.incrementByAmount,ot.reducer),lt=Object(x.a)({reducer:{counter:ut,auth:De,user:Le,filter:je,error:nt,task:F}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));k.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),k.interceptors.response.use(void 0,(function(e){var t;return[422,404,400].includes(null===(t=e.response)||void 0===t?void 0:t.status)&&(lt.dispatch(Ye(e.response.data)),"Invalid token"===e.response.data.message&&lt.dispatch(qe()),console.log("interceptors:",e.response.data)),Promise.reject(e)})),s.a.render(Object(T.jsx)(i.a.StrictMode,{children:Object(T.jsx)(u.a,{store:lt,children:Object(T.jsx)(at,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[515,1,2]]]);
//# sourceMappingURL=main.9115c2a3.chunk.js.map