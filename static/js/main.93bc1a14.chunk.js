(this["webpackJsonptodo-ts-redux"]=this["webpackJsonptodo-ts-redux"]||[]).push([[0],{271:function(e,t,n){},399:function(e,t){},401:function(e,t){},416:function(e,t){},418:function(e,t){},446:function(e,t){},448:function(e,t){},449:function(e,t){},454:function(e,t){},456:function(e,t){},462:function(e,t){},464:function(e,t){},483:function(e,t){},495:function(e,t){},498:function(e,t){},515:function(e,t,n){"use strict";n.r(t);var a,r,c=n(0),i=n(14),o=n.n(i),s=(n(271),n(10)),u=n(24),l=n.n(u),d=n(36),j=n(564),b=n(557),f=n(555),p=n(565),m=n(571),O=n(2),g=function(e){var t=e.handleNewToDo;return Object(O.jsx)(m.a,{margin:"normal",id:"outlined-basic",label:"New to do",variant:"outlined",size:"small",fullWidth:!0,type:"text",onKeyPress:function(e){return t(e)}})},h=n(556),x=n(517),v=n(250),k=n.n(v),y=n(251),S=n.n(y),w=n(9),C=n(23),N=n(249),L=n.n(N).a.create({baseURL:"https://data-multi-user.herokuapp.com/"}),E=Object(C.b)("task/fetchTask",function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r,c,i,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getState,r=a(),c=r.filter,i=a(),o=i.task,e.next=5,L.get("tasks",{params:{order:c.order,filterBy:c.filterBy,page:o.page,taskCount:o.taskCount}});case 5:return s=e.sent,e.abrupt("return",s.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),B=Object(C.b)("task/createTask",function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r,c,i,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getState,r=a(),c=r.filter,i=a(),o=i.task,e.next=5,L.post("task",{name:t},{params:{order:c.order,filterBy:c.filterBy,page:o.page,taskCount:o.taskCount}});case 5:return s=e.sent,e.abrupt("return",s.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),I=Object(C.b)("task/changeTask",function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r,c,i,o,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getState,r=a(),c=r.filter,i=a(),o=i.task,t.name&&(s={name:t.name}),"boolean"===typeof t.done&&(s={done:t.done}),e.next=7,L.patch("task/".concat(t.id),s,{params:{order:c.order,filterBy:c.filterBy,page:o.page,taskCount:o.taskCount}});case 7:return u=e.sent,e.abrupt("return",u.data);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),T=(Object(C.b)("task/changeDoneStatus",function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.patch("task/".concat(t.id),{done:t.done});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Object(C.b)("task/deleteTask",function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r,c,i,o,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.getState,r=a(),c=r.filter,i=a(),o=i.task,e.next=5,L.delete("task/".concat(t),{params:{order:c.order,filterBy:c.filterBy,page:o.page,taskCount:o.taskCount}});case 5:return s=e.sent,e.abrupt("return",s.data);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())),q=Object(C.c)({name:"task",initialState:{tasks:[],pageCount:1,page:1,isLoading:!1,hasError:!1,taskCount:5},reducers:{changeActivePage:function(e,t){e.page=t.payload},changeTaskCount:function(e,t){e.taskCount=t.payload}},extraReducers:(a={},Object(w.a)(a,E.pending,(function(e){e.isLoading=!1})),Object(w.a)(a,E.fulfilled,(function(e,t){e.tasks=t.payload.tasks,e.pageCount=t.payload.pageCount,e.isLoading=!0})),Object(w.a)(a,E.rejected,(function(e){e.isLoading=!0,e.hasError=!0})),Object(w.a)(a,B.pending,(function(e){e.isLoading=!0})),Object(w.a)(a,B.fulfilled,(function(e,t){e.tasks=t.payload.tasks,e.pageCount=t.payload.pageCount,e.isLoading=!0})),Object(w.a)(a,B.rejected,(function(e){e.isLoading=!0,e.hasError=!0})),Object(w.a)(a,I.pending,(function(e){e.isLoading=!0})),Object(w.a)(a,I.fulfilled,(function(e,t){e.tasks=t.payload.tasks,e.pageCount=t.payload.pageCount,e.isLoading=!0})),Object(w.a)(a,I.rejected,(function(e){e.isLoading=!0,e.hasError=!0})),Object(w.a)(a,T.pending,(function(e){e.isLoading=!0})),Object(w.a)(a,T.fulfilled,(function(e,t){e.tasks=t.payload.tasks,e.pageCount=t.payload.pageCount,e.isLoading=!0})),Object(w.a)(a,T.rejected,(function(e){e.isLoading=!0,e.hasError=!0})),a)}),F=q.actions,P=F.changeActivePage,D=F.changeTaskCount,R=function(e){return e.task.tasks},A=function(e){return e.task.pageCount},W=function(e){return e.task.isLoading},U=function(e){return e.task.page},V=function(e){return e.task.taskCount},z=q.reducer,K=function(){var e=Object(s.b)(),t=Object(s.c)(U),n=Object(s.c)(A),a=new Array(n).fill(1).map((function(e,t){return t+1})),r=function(t){"string"===typeof t.currentTarget.value&&(e(P(Number(t.currentTarget.value))),e(E()))};return Object(O.jsxs)(h.a,{color:"primary","aria-label":"contained button group",children:[Object(O.jsx)(x.a,{onClick:function(e){return r(e)},value:1,children:Object(O.jsx)(k.a,{})}),a.map((function(e){return Object(O.jsx)(x.a,{onClick:function(e){return r(e)},value:e,variant:t===e?"contained":void 0,children:e},"item-".concat(e))})),Object(O.jsx)(x.a,{onClick:function(e){return r(e)},value:a.length,children:Object(O.jsx)(S.a,{})})]})},G=n(25),J=n(518),M=n(558),H=n(572),$=n(550),Q=n(560),X=n(561),Y=n(559),Z=n(252),_=n.n(Z),ee=function(e){var t=e.task,n=Object(s.b)(),a=Object(c.useState)(!1),r=Object(G.a)(a,2),i=r[0],o=r[1],u=Object(c.useState)(!1),l=Object(G.a)(u,2),d=l[0],j=l[1],f=t.createdAt.match(/([12]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\d|3[01]))/),p=t.createdAt.match(/T(((([0-1][0-9])|(2[0-3])):?[0-5][0-9]))/g),m=null!==f&&null!==p?"".concat(p[0].replace("T","")," ").concat(f[0]):"Not date";return Object(O.jsx)(b.a,{container:!0,children:Object(O.jsxs)(J.a,{children:[Object(O.jsx)(b.a,{item:!0,xs:1,children:Object(O.jsx)(M.a,{children:Object(O.jsx)(H.a,{color:"primary",name:t.id,onChange:function(e){return function(e){var t=e.target;"boolean"===typeof t.checked&&n(I({id:t.name,done:t.checked}))}(e)},checked:t.done,value:t.id})})}),Object(O.jsx)(b.a,{item:!0,xs:8,children:i?Object(O.jsx)($.a,{fullWidth:!0,defaultValue:t.name,autoFocus:!0,name:t.id,onBlur:function(){return o(!i)},onKeyDown:function(e){return"Escape"===e.key&&o(!1)},onKeyPress:function(e){return function(e){var t=e.key,a=e.target;"Enter"===t&&a.value.trim()&&n(I({id:a.name,name:a.value}))}(e)},onKeyUp:function(e){return"Enter"===e.key&&o(!1)}}):Object(O.jsx)(Q.a,{primary:t.name,onClick:function(){return o(!i)}})}),Object(O.jsx)(b.a,{item:!0,xs:2,children:Object(O.jsx)(Q.a,{primary:m})}),Object(O.jsx)(b.a,{item:!0,xs:1,children:Object(O.jsx)(X.a,{children:Object(O.jsx)(Y.a,{edge:"end",disabled:d,"aria-label":"delete",onClick:function(e){n(T(e.currentTarget.value)),j(!0)},value:t.id,children:Object(O.jsx)(_.a,{})})})})]})})},te=n(89),ne=n(569),ae=n(562),re=function(){var e=Object(s.c)(V),t=Object(s.b)();return Object(O.jsxs)(ne.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:e,onChange:function(e){return function(e){t(D(Number(e.target.value))),t(P(1)),t(E())}(e)},children:[Object(O.jsx)(ae.a,{value:5,children:"5"}),Object(O.jsx)(ae.a,{value:10,children:"10"}),Object(O.jsx)(ae.a,{value:20,children:"20"})]})},ce=n(563),ie=Object(C.c)({name:"filter",initialState:{filterByButtons:["all","done","undone"],filterBy:"all",orderValue:["ASC","DESC"],order:"DESC"},reducers:{changeOrder:function(e,t){e.order=t.payload},changeFilterBy:function(e,t){e.filterBy=t.payload}}}),oe=ie.actions,se=oe.changeOrder,ue=oe.changeFilterBy,le=function(e){return e.filter.orderValue},de=function(e){return e.filter.filterBy},je=function(e){return e.filter.order.toUpperCase()},be=function(e){return e.filter.filterByButtons},fe=ie.reducer,pe=function(){var e=Object(s.c)(be),t=Object(s.c)(de),n=Object(s.b)();return Object(O.jsx)(h.a,{color:"primary","aria-label":"outlined primary button group",children:e.map((function(e){return Object(O.jsx)(x.a,{size:"medium",variant:t===e?"contained":void 0,onClick:function(e){n(ue(e.currentTarget.value)),n(P(1)),n(E())},value:e,children:e},e)}))})},me=function(){var e=Object(s.c)(je),t=Object(s.c)(le),n=Object(s.b)();return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(h.a,{variant:"text",color:"primary","aria-label":"text primary button group",children:t.map((function(t){return Object(O.jsx)(x.a,{size:"medium",variant:e===t?"contained":void 0,onClick:function(e){n(se(e.currentTarget.value)),n(E())},value:t,children:t},t)}))})})},Oe=Object(ce.a)((function(e){return{root:{flexGrow:1},paper:{paddingTop:e.spacing(1),paddingBottom:e.spacing(2),color:e.palette.text.secondary,justifyContent:"space-between"}}})),ge=function(e){e.onChangeItemFilter,e.itemPerPage;var t=Oe();return Object(O.jsx)("div",{className:t.paper,children:Object(O.jsxs)(b.a,{container:!0,spacing:3,children:[Object(O.jsx)(b.a,{item:!0,xs:6,children:Object(O.jsx)(pe,{})}),Object(O.jsxs)(b.a,{item:!0,xs:3,alignItems:"center",container:!0,children:[Object(O.jsx)(te.a,{variant:"subtitle1",children:"Sort by:"}),Object(O.jsx)(me,{})]}),Object(O.jsxs)(b.a,{item:!0,xs:3,alignItems:"center",container:!0,children:[Object(O.jsx)(te.a,{variant:"subtitle1",children:"Page count"}),Object(O.jsx)(re,{})]})]})})},he=function(){var e=Object(s.c)(R),t=Object(s.c)(W),n=Object(s.c)(A),a=Object(s.b)();Object(c.useEffect)((function(){sessionStorage.token&&a(E())}),[a]);var r=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.key,r=t.target,"Enter"===n&&r.value.trim()&&(a(B(r.value)),r.value="");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)(j.a,{maxWidth:"md",children:Object(O.jsxs)(b.a,{children:[Object(O.jsx)(b.a,{children:Object(O.jsx)(g,{handleNewToDo:r})}),Object(O.jsx)(ge,{}),Object(O.jsx)(b.a,{item:!0,alignItems:"center",container:!0,xs:12,children:t&&n>1&&Object(O.jsx)(K,{})}),Object(O.jsx)(f.a,{children:t?e.map((function(e){return Object(O.jsx)(ee,{task:e},e.id)})):Object(O.jsx)(p.a,{})})]})})},xe=n(56),ve=n(42),ke=n(78),ye=function(e){var t=Object(xe.c)(e),n=Object(G.a)(t,2),a=n[0],r=n[1];return Object(O.jsx)(b.a,{item:!0,children:Object(O.jsx)(m.a,Object(ke.a)(Object(ke.a)({fullWidth:!0,margin:"normal",error:!(!r.touched||!r.error),helperText:r.touched&&r.error&&r.error,variant:"outlined"},a),e))})},Se=Object(C.b)("user/fetchToken",function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.post("login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),we=Object(C.b)("user/registration",function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L.post("signup",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ce={firstName:sessionStorage.firstName||"",lastName:sessionStorage.lastName||"",token:sessionStorage.token||"",isLoading:!0,hasError:!1},Ne=Object(C.c)({name:"user",initialState:Ce,reducers:{clearUserData:function(e){e.firstName=e.lastName=e.token="",e.isLoading=e.hasError=!1}},extraReducers:(r={},Object(w.a)(r,Se.pending,(function(e){e.isLoading=!1,e.hasError=!1})),Object(w.a)(r,Se.fulfilled,(function(e,t){e.token=t.payload.token,e.firstName=t.payload.firstName,e.lastName=t.payload.lastName,sessionStorage.setItem("token",e.token),sessionStorage.setItem("firstName",e.firstName),sessionStorage.setItem("lastName",e.lastName),e.isLoading=!0,e.hasError=!1})),Object(w.a)(r,Se.rejected,(function(e,t){e.isLoading=!1,e.hasError=!0})),Object(w.a)(r,we.pending,(function(e){e.isLoading=!1,e.hasError=!1})),Object(w.a)(r,we.fulfilled,(function(e,t){e.token=t.payload.token,e.firstName=t.payload.firstName,e.lastName=t.payload.lastName,sessionStorage.setItem("token",e.token),sessionStorage.setItem("firstName",e.firstName),sessionStorage.setItem("lastName",e.lastName),e.isLoading=!0,e.hasError=!1})),Object(w.a)(r,we.rejected,(function(e){e.isLoading=!1,e.hasError=!0})),r)}),Le=Ne.actions.clearUserData,Ee=function(e){return e.user.firstName},Be=function(e){return e.user.lastName},Ie=function(e){return e.user.isLoading},Te=Ne.reducer,qe=Object(C.c)({name:"auth",initialState:{loginForm:!0,authStatus:!1},reducers:{toggleLoginForm:function(e){e.loginForm=!e.loginForm},toggleAuthStatus:function(e,t){e.authStatus=t.payload},logOut:function(e){sessionStorage.clear(),e.authStatus=!1}}}),Fe=qe.actions,Pe=Fe.toggleLoginForm,De=Fe.toggleAuthStatus,Re=Fe.logOut,Ae=function(e){return e.auth.loginForm},We=function(e){return e.auth.authStatus},Ue=qe.reducer,Ve=function(){var e=Object(s.b)();return Object(O.jsx)(xe.b,{initialValues:{email:"",password:""},validationSchema:ve.a({email:ve.b().email("Invalid email address").required("Required"),password:ve.b().min(8,"Must be 8 characters or more").required("Required")}),onSubmit:function(t,n){var a=n.setSubmitting;e(Se(t)),e(De(!0)),a(!1)},children:Object(O.jsxs)(xe.a,{children:[Object(O.jsx)(ye,{name:"email",label:"Email"}),Object(O.jsx)(ye,{name:"password",label:"Password",type:"password",autoComplete:"current-password"}),Object(O.jsx)(b.a,{item:!0,children:Object(O.jsx)(x.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:"Log in"})})]})})},ze=function(){var e=Object(s.b)();return Object(O.jsx)(xe.b,{initialValues:{firstName:"",lastName:"",email:"",password:""},validationSchema:ve.a({firstName:ve.b().required("Required"),lastName:ve.b().required("Required"),email:ve.b().email("Invalid email address").required("Required"),password:ve.b().min(8,"Must be 8 characters or more").required("Required")}),onSubmit:function(t,n){var a=n.setSubmitting;e(we(t)),e(De(!0)),a(!1)},children:Object(O.jsxs)(xe.a,{children:[Object(O.jsx)(ye,{name:"firstName",label:"First name"}),Object(O.jsx)(ye,{name:"lastName",label:"Last name"}),Object(O.jsx)(ye,{name:"email",label:"Email"}),Object(O.jsx)(ye,{name:"password",label:"Password",type:"password",autoComplete:"current-password"}),Object(O.jsx)(b.a,{item:!0,children:Object(O.jsx)(x.a,{variant:"contained",color:"primary",type:"submit",fullWidth:!0,children:"Sign up"})})]})})},Ke=function(){var e=Object(s.c)(Ae);return Object(O.jsx)(b.a,{container:!0,spacing:10,justify:"center",alignItems:"center",children:Object(O.jsx)(b.a,{item:!0,xs:5,children:e?Object(O.jsx)(Ve,{}):Object(O.jsx)(ze,{})})})},Ge=n(574),Je=n(570),Me=n(568),He=n(566),$e=n(567),Qe=Object(ce.a)((function(e){return{root:{justifyContent:"space-between"},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}}})),Xe=function(){var e=Object(s.c)(Ae),t=Object(s.c)(Ee),n=Object(s.c)(Be),a=Object(s.c)(We),r=Object(s.c)(Ie),c=Object(s.b)(),i=Qe();return Object(O.jsx)("div",{className:i.root,children:Object(O.jsx)(He.a,{position:"static",children:Object(O.jsx)($e.a,{children:Object(O.jsxs)(b.a,{container:!0,alignItems:"center",justify:"space-between",children:[Object(O.jsx)(b.a,{item:!0,xs:3,children:Object(O.jsx)(te.a,{variant:"h6",className:i.title,children:"To do list"})}),a&&r&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(b.a,{item:!0,xs:8,children:Object(O.jsx)(te.a,{variant:"body1",align:"right",children:"".concat(t," ").concat(n)})}),Object(O.jsx)(b.a,{item:!0,xs:1,children:Object(O.jsx)(x.a,{color:"inherit",onClick:function(){return c(Re())},children:"Log Out"})})]}),Object(O.jsx)(b.a,{item:!0,xs:1,children:!(a&&r)&&Object(O.jsx)(x.a,{color:"inherit",onClick:function(){c(Pe()),c(Le())},children:e?"Sign up":"Login"})})]})})})})},Ye=Object(C.c)({name:"error",initialState:{errorStatus:!1,statusCode:null,message:"",errorStack:{}},reducers:{createError:function(e,t){e.statusCode=t.payload.statusCode,e.message=t.payload.message,e.errorStatus=!0},closeError:function(e,t){"clickaway"!==t.payload&&(e.errorStatus=!1,e.message=e.message="",e.errorStack={})}}}),Ze=Ye.actions,_e=Ze.createError,et=Ze.closeError,tt=function(e){return e.error.errorStatus},nt=function(e){return e.error.statusCode},at=function(e){return e.error.message},rt=Ye.reducer,ct=n(258);var it=function(){var e=Object(s.c)(We),t=Object(s.c)(Ie),n=Object(s.c)(tt),a=Object(s.c)(nt),r=Object(s.c)(at),i=Object(s.b)();return Object(c.useLayoutEffect)((function(){var e=sessionStorage.getItem("token");if(null!==e){var t=ct.decode(e.split(" ")[1]);null!==t&&"string"!==typeof t&&Date.now()>t.exp&&i(De(!0)),L.defaults.headers={Authorization:sessionStorage.getItem("token")}}})),Object(O.jsxs)(j.a,{children:[Object(O.jsx)(Xe,{}),e&&t&&Object(O.jsx)(he,{}),!(e&&t)&&Object(O.jsx)(Ke,{}),Object(O.jsx)(Ge.a,{open:n,autoHideDuration:6e3,onClose:function(e,t){return i(et(t))},children:Object(O.jsxs)(Je.a,{severity:"error",children:[Object(O.jsx)(Me.a,{children:"Error ".concat(a)}),r]})})]})},ot=Object(C.a)({reducer:{auth:Ue,user:Te,filter:fe,error:rt,task:z}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));L.interceptors.request.use((function(e){return e}),(function(e){return Promise.reject(e)})),L.interceptors.response.use(void 0,(function(e){var t;return[422,404,400].includes(null===(t=e.response)||void 0===t?void 0:t.status)&&(ot.dispatch(_e(e.response.data)),"Invalid token"===e.response.data.message&&ot.dispatch(Re()),console.log("interceptors:",e.response.data)),Promise.reject(e)})),o.a.render(Object(O.jsx)(s.a,{store:ot,children:Object(O.jsx)(it,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[515,1,2]]]);
//# sourceMappingURL=main.93bc1a14.chunk.js.map